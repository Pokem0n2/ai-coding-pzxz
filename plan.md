# 桌游辅助服务器 - 关键要点

## 项目结构
- **server.js**: Express服务器，监听3080端口，提供静态文件服务和WebSocket支持
- **index.html**: 身份选择页面，用于分配上帝和玩家身份
- **setup.html**: 上帝设置页面，用于设置游戏参数
- **wait.html**: 玩家等待页面，显示等待房间创建
- **god-room.html**: 上帝房间页面，显示游戏模式、玩家计数和玩家列表
- **room.html**: 玩家房间页面，用于输入昵称和加入游戏
- **char-list.html**: 上帝角色列表页面，显示玩家角色选择情况
- **char-pick.html**: 玩家角色选择页面，用于选择角色
- **god-panel.html**: 上帝游戏控制面板
- **panel.html**: 玩家游戏面板
- **chars.txt**: 角色和技能数据文件
- **package.json**: 项目配置文件，包含依赖信息
- **progress.md**: 已实现功能记录
- **plan.md**: 项目计划和后续扩展考虑

## 功能实现

### 身份选择页面 (index.html)
- **访问地址**: http://localhost:3080/index.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 身份选择："我是上帝"和"我是玩家"按钮
  - 身份标记：选择后存储身份标记到localStorage
  - 页面跳转：选择"我是上帝"跳转到setup.html，选择"我是玩家"跳转到wait.html

### 等待页面 (wait.html)
- **访问地址**: http://localhost:3080/wait.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 显示"等待房间创建"提示
  - WebSocket实时检查房间状态，房间创建后自动跳转到room.html

### 上帝设置页面 (setup.html)
- **访问地址**: http://localhost:3080/setup.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 游戏模式选择：普通模式和里世界模式，默认普通模式
  - 玩家数量选择：
    - 普通模式：5-10人，默认7人
    - 里世界模式：8-10人
  - 确认按钮：点击后存储游戏配置并跳转到god-room.html

### 上帝房间页面 (god-room.html)
- **访问地址**: http://localhost:3080/god-room.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 左上角显示"模式：mode"，mode为之前选择的游戏模式
  - 右上角显示"count/total"，count初始值为0，total为之前选择的人数
  - 实时显示玩家加入列表，每当有一个玩家加入时，动态更新显示"order，nickname，已加入"
  - 开始游戏按钮：当房间人数满员时，点击后所有人跳转到角色选择页面

### 玩家房间页面 (room.html)
- **访问地址**: http://localhost:3080/room.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 左上角显示"编号：待定"
  - 昵称输入框和确认按钮
  - 点击确认后分配编号并加入房间
  - 昵称重名检测

### 上帝角色列表页面 (char-list.html)
- **访问地址**: http://localhost:3080/char-list.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 左上角显示"模式：mode"
  - 右上角显示"count/total"，count为已确认角色的玩家数量
  - 实时显示玩家角色选择情况，按编号排序
  - 显示"order，nickname，character，已确认角色和技能"
  - 开始发牌按钮：当所有人都确认角色后，点击后所有人跳转到游戏面板页面

### 玩家角色选择页面 (char-pick.html)
- **访问地址**: http://localhost:3080/char-pick.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 左上角显示"编号：order"
  - 空白说明文本块，用于显示角色技能说明
  - 两个圆角矩形按钮，显示分配的两个角色名
  - "确认使用"按钮
  - 随机分配两个不同的角色，点击按钮切换选中状态并显示技能说明
  - 确认角色选择后发送信息给上帝

### 上帝游戏控制面板 (god-panel.html)
- **访问地址**: http://localhost:3080/god-panel.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 显示游戏模式和玩家数量
  - 提供游戏控制按钮：发牌、开始回合、结束回合、查看玩家状态

### 玩家游戏面板 (panel.html)
- **访问地址**: http://localhost:3080/panel.html
- **布局**: 竖屏手机响应式布局
- **功能**: 
  - 显示玩家编号、昵称和角色
  - 显示手牌
  - 提供游戏操作按钮：出牌、发言、投票

### WebSocket服务
- **功能**: 
  - 实时通信：玩家加入通知、房间状态更新、游戏开始通知、错误消息通知
  - 房间管理：创建房间、玩家加入、状态同步、昵称重名检测
  - 角色管理：随机分配角色、角色确认、角色列表更新
  - 消息广播：向所有客户端推送消息

### 技术栈
- **后端**: Node.js + Express
- **前端**: HTML + CSS + JavaScript
- **端口**: 3080

## 后续扩展考虑
1. **玩家端页面**:
   - 玩家信息展示
   - 手牌管理
   - 技能使用

2. **数据推送**:
   - 实时更新玩家状态
   - 游戏事件通知

3. **交互功能**:
   - 抽卡功能
   - 交换手牌
   - 技能触发

4. **统计功能**:
   - 投票系统
   - 游戏数据统计

5. **UI优化**:
   - 适配不同手机屏幕
   - 美观的视觉设计
   - 流畅的动画效果

6. **数据持久化**:
   - 游戏配置保存
   - 游戏记录存储

## 注意事项
- 所有页面均为竖屏手机页面
- 需考虑响应式布局，适配苹果和安卓手机
- 后续功能扩展需保持代码结构清晰
- 确保服务器稳定运行，支持多用户同时访问
- 每次有修改时更新git代码仓和相关的md文件，排除node_modules文件夹
